{% extends 'base.html.twig' %}

{% block content %}

    {% if errors %}
        {% for index, error in errors %}
            <div class="alert alert-danger" role="alert">
                {{ index|capitalize }} : {{ error.0 }}
            </div>
        {% endfor %}
    {% endif %}

    <form class="form-horizontal" method="post">
        <div class="form-group">
            <label for="title" class="col-sm-2 control-label">Titre</label>
            <div class="col-sm-10">
                <input value="{{ book.title }}" name="title" type="text" class="form-control" id="title" placeholder="Titre">
            </div>
        </div>
        <div class="form-group">
            <label for="author_id" class="col-sm-2 control-label">Auteur</label>
            <div class="col-sm-10">
                <select name="author_id" id="author_id" class="form-control">
                    {% for author in authors %}
                        <option value="{{ author.id }}" {% if author.id == book.author_id %}selected{% endif %}>{{ author.title }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="genre_id" class="col-sm-2 control-label">Genre</label>
            <div class="col-sm-10">
                <select name="genre_id" id="genre_id" class="form-control">
                    {% for genre in genres %}
                        <option value="{{ genre.id }}" {% if genre.id == book.genre_id %}selected{% endif %}>{{ genre.title }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="body" class="col-sm-2 control-label">Description</label>
            <div class="col-sm-10">
                <textarea name="body" type="text" class="form-control" id="body" placeholder="Description" rows="10">{{ book.body }}</textarea>
            </div>
        </div>

        <input type="hidden" name="id" value="{{ book.id }}">
        <input type="hidden" name="{{ token.name }}" value="{{ token.keypair.csrf_name }}">
        <input type="hidden" name="{{ token.value }}" value="{{ token.keypair.csrf_value }}">

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-default">Ajouter</button>
            </div>
        </div>
    </form>

{% endblock %}